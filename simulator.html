<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>Gi·∫£ L·∫≠p C·∫£m Bi·∫øn IoT</title>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="firebase-config.js"></script>

    <style>
        body {
            font-family: 'Outfit', sans-serif;
            background: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }

        .card {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            width: 400px;
        }

        h1 {
            text-align: center;
            color: #34495e;
            margin-bottom: 1.5rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            color: #7f8c8d;
            font-weight: bold;
        }

        input,
        select {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #dfe6e9;
            border-radius: 6px;
            box-sizing: border-box;
        }

        button {
            width: 100%;
            padding: 1rem;
            background: #00b894;
            color: white;
            border: none;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.3s;
        }

        button:hover {
            background: #00a884;
        }

        #status {
            text-align: center;
            margin-top: 1rem;
            font-weight: bold;
            min-height: 1.2rem;
        }

        .success {
            color: #00b894;
        }

        .error {
            color: #d63031;
        }
    </style>
</head>

<body>
    <div class="card">
        <h1>üìä Hardware Simulator</h1>

        <div class="form-group">
            <label>M√£ Ph√≤ng (Room ID)</label>
            <input type="text" id="roomId" placeholder="VD: A101" value="A101" style="text-transform: uppercase;">
        </div>

        <div class="form-group">
            <label>üî• Nhi·ªát ƒê·ªô (¬∞C)</label>
            <input type="number" id="temp" value="24">
        </div>


        <div class="form-group">
            <label>üí° √Ånh S√°ng (Lux)</label>
            <input type="number" id="light" value="2549">
        </div>

        <div class="form-group">
            <label>üö∂ Ph√°t Hi·ªán Ng∆∞·ªùi</label>
            <select id="presence">
                <option value="0">Kh√¥ng c√≥ ng∆∞·ªùi (0)</option>
                <option value="1" selected>C√≥ ng∆∞·ªùi (1)</option>
            </select>
        </div>

        <button onclick="sendData()">G·ª≠i D·ªØ Li·ªáu L√™n Firebase</button>
        <p id="status"></p>
    </div>

    <script>
        // Init Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const db = firebase.database();

        function sendData() {
            const statusEl = document.getElementById('status');
            const roomId = document.getElementById('roomId').value.trim().toUpperCase();

            if (!roomId) {
                statusEl.textContent = "Vui l√≤ng nh·∫≠p M√£ ph√≤ng!";
                statusEl.className = 'error';
                return;
            }

            const data = {
                NhietDo: parseFloat(document.getElementById('temp').value),
                AnhSang: parseFloat(document.getElementById('light').value),
                PhatHienNguoi: parseInt(document.getElementById('presence').value)
            };

            statusEl.textContent = "ƒêang g·ª≠i...";
            statusEl.className = '';

            db.ref('Rooms/' + roomId).update(data)
                .then(() => {
                    statusEl.textContent = `ƒê√£ g·ª≠i th√†nh c√¥ng ƒë·∫øn Rooms/${roomId}!`;
                    statusEl.className = 'success';
                })
                .catch(err => {
                    statusEl.textContent = "L·ªói: " + err.message;
                    statusEl.className = 'error';
                });
        }
    </script>
</body>

</html>